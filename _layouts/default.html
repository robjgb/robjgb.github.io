<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100;200;300;400;500;600;700;800;900&family=Urbanist:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">     
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/css/theme.css">
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
  
    <body data-barba="wrapper">
    <div class="radial-gradient"></div>
    <div class="d-flex justify-content-between container mx-auto gap-3"> 
        {% include navbar.html %}
        <div class="w-50 pt-12 mx-auto max-vh-100"> 
            <main class="" data-barba="container" data-barba-namespace="{{ page.title }}"> 
                <div class="wrapper">
                    <div class="marquee" style="color: #0a0a0a;">
                    <h1 class="fs-50">{{ page.title }}<span>&nbsp;</span> </h1> 
                    <h1 class="fs-50">{{ page.title }}<span>&nbsp;</span> </h1> 
                    <h1 class="fs-50">{{ page.title }}<span>&nbsp;</span> </h1> 
                    <h1 class="fs-50">{{ page.title }}<span>&nbsp;</span> </h1> 
                    <h1 class="fs-50">{{ page.title }}<span>&nbsp;</span> </h1> 
                    <h1 class="fs-50">{{ page.title }}<span>&nbsp;</span> </h1> 
                    </div>
                </div>
                {{ content }}
            </main>
    
        </div>

    </div>


    </div>

    <div class="noise"></div>
    <!-- load barba (UMD version) -->
    <script src="https://unpkg.com/@barba/core"></script>

    <!-- load gsap animation library (minified version) -->
    <script src="https://unpkg.com/gsap@latest/dist/gsap.min.js"></script>

    <!-- init barba with a simple opacity transition -->
    <script type="text/javascript">
        function updateMenu(url) {
            const active = document.querySelector('.navbar-nav a.active');

            if (active !== null) {
                active.classList.remove('active');
                console.log("remove", active)
            }

            const links = Array.from(document.querySelectorAll('.navbar-nav a'));
            const linkURLS = links.map(link => link.pathname);
            console.log(linkURLS, url);

            const index = linkURLS.indexOf(url);
            console.log(index);

            if (index !== -1) {
                console.log("add", links[index])
                links[index].classList.add('active');
            }
        }

        // hooks that will be triggered before any page transition
        // meaning your menu active class will be updated before going to the next page
        barba.hooks.before((data) => {
            console.log(data.trigger.pathname);
            updateMenu(data.trigger.pathname);
        });

        barba.init({
            preventRunning: true,
            transitions: [{
                name: 'disableMouse',
                    before(){
                        const body = document.querySelector('body');
                        body.classList.add('noHover');
                    },
                    after(){
                        const body = document.querySelector('body');
                        body.classList.remove('noHover');
                    },
                name: 'getNavActive',
                    beforeOnce(data) {
                        console.log(data.next.url.path);
                        updateMenu(data.next.url.path);
                    },
                    once(data) {
                        return gsap.from(data.next.container, {
                        opacity: 0
                    });
                    },
                    afterOnce(){
                    },
                name: 'opacity-transition',
                     leave: ({current}) => {
                         gsap.to(current.container, {
                            autoAlpha: 0, duration: 1, clearProps:'all', ease:'none'
                        });
                    },
                     enter({next}) {
                         gsap.from(next.container, {
                            autoAlpha: 0, duration: 1, clearProps:'all', ease:'none'
                    });
                }
            }]
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="/assets/js/theme.js" ></script>
</html>